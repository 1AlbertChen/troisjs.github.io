import{a3 as t,ao as e,_ as s}from"./OrbitControls.94891aa4.js";import{A as i,B as a,a as n,E as o,H as r,I as l,e as h,c as m,R as d,f as c,d as u,S as p,g as f,U as y}from"./trois.module.1b5475c0.js";import{r as g,o as x,c as S,w as M,b as N}from"./app.c7e5a5f6.js";const{randFloat:O,randFloatSpread:_}=s,A={components:{AmbientLight:i,BoxGeometry:a,Camera:n,EffectComposer:o,HalftonePass:r,InstancedMesh:l,PhongMaterial:h,PointLight:m,Renderer:d,RenderPass:c,StandardMaterial:u,Scene:p,Text:f,UnrealBloomPass:y},setup(){const s=[],i=new e,a=new t,n=new e;for(let t=0;t<2e3;t++)s.push({position:new e(_(200),_(200),_(200)),scale:O(.2,1),scaleZ:O(.1,1),velocity:new e(_(2),_(2),_(2)),attraction:.03+O(-.01,.01),vlimit:1.2+O(-.1,.1)});return{NUM_INSTANCES:2e3,instances:s,target:i,dummyO:a,dummyV:n}},mounted(){this.renderer=this.$refs.renderer,this.imesh=this.$refs.imesh.mesh,this.light=this.$refs.light.light,this.init()},methods:{init(){for(let t=0;t<this.NUM_INSTANCES;t++){const{position:e,scale:s,scaleZ:i}=this.instances[t];this.dummyO.position.copy(e),this.dummyO.scale.set(s,s,i),this.dummyO.updateMatrix(),this.imesh.setMatrixAt(t,this.dummyO.matrix)}this.imesh.instanceMatrix.needsUpdate=!0,this.renderer.onBeforeRender(this.animate)},animate(){const{pointer:t}=this.renderer.three;this.target.copy(t.positionV3),this.light.position.copy(this.target);for(let e=0;e<this.NUM_INSTANCES;e++){const{position:t,scale:s,scaleZ:i,velocity:a,attraction:n,vlimit:o}=this.instances[e];this.dummyV.copy(this.target).sub(t).normalize().multiplyScalar(n),a.add(this.dummyV).clampScalar(-o,o),t.add(a),this.dummyO.position.copy(t),this.dummyO.scale.set(s,s,i),this.dummyO.lookAt(this.dummyV.copy(t).add(a)),this.dummyO.updateMatrix(),this.imesh.setMatrixAt(e,this.dummyO.matrix)}this.imesh.instanceMatrix.needsUpdate=!0}}};A.render=function(t,e,s,i,a,n){const o=g("Camera"),r=g("AmbientLight"),l=g("PointLight"),h=g("BoxGeometry"),m=g("StandardMaterial"),d=g("InstancedMesh"),c=g("PhongMaterial"),u=g("Text"),p=g("Scene"),f=g("RenderPass"),y=g("UnrealBloomPass"),O=g("HalftonePass"),_=g("EffectComposer"),A=g("Renderer");return x(),S(A,{ref:"renderer",resize:"","orbit-ctrl":"",pointer:""},{default:M((()=>[N(o,{position:{z:200}}),N(p,null,{default:M((()=>[N(r,{color:"#808080"}),N(l,{color:"#ff6000"}),N(l,{ref:"light",color:"#0060ff",intensity:.5},null,8,["intensity"]),N(l,{color:"#ff6000",intensity:.5,position:{x:100}},null,8,["intensity"]),N(l,{color:"#0000ff",intensity:.5,position:{x:-100}},null,8,["intensity"]),N(d,{ref:"imesh",count:i.NUM_INSTANCES},{default:M((()=>[N(h,{width:2,height:2,depth:10}),N(m,{transparent:!0,opacity:.9,metalness:.8,roughness:.5},null,8,["opacity","metalness","roughness"])])),_:1},8,["count"]),N(u,{text:"TroisJS","font-src":"/assets/helvetiker_regular.typeface.json",align:"center",size:30,height:5,position:{x:0,y:0,z:0},"cast-shadow":!0},{default:M((()=>[N(c)])),_:1})])),_:1}),N(_,null,{default:M((()=>[N(f),N(y,{strength:1}),N(O,{radius:1,scatter:0})])),_:1})])),_:1},512)};export default A;
