import{a3 as a,r as e,_ as t}from"./OrbitControls.94891aa4.js";import{A as o,l as s,a as i,I as n,e as r,p as h,R as l,S as d,h as p,i as c,r as m}from"./trois.module.1b5475c0.js";import{C as f,n as u}from"./100.acf358fa.js";import{r as C,o as g,c as w,w as y,b as M,F as b,l as x}from"./app.c7e5a5f6.js";const{randFloat:S,randFloatSpread:z}=t,A={components:{AmbientLight:o,Box:s,Camera:i,InstancedMesh:n,PhongMaterial:r,Plane:h,Renderer:l,Scene:d,SphereGeometry:p,SpotLight:c,ToonMaterial:m,CannonWorld:f},setup:()=>({COUNT:500}),methods:{initIMesh(t){this.imesh=t;const o=new a,s=new e,i=new Array(this.COUNT),n=new Array(this.COUNT),r=new Array(this.COUNT).fill().map((()=>u[20][Math.floor(S(0,5))]));for(let a=0;a<this.COUNT;a++){o.position.set(z(2),z(5),0);const e=S(.2,1);i[a]=e,n[a]=.01*e,o.scale.set(e,e,e),o.updateMatrix(),t.setMatrixAt(a,o.matrix),t.setColorAt(a,s.set(r[a]))}t.instanceMatrix.needsUpdate=!0,t.userData.scales=i,t.userData.masses=n,t.userData.damping=.7},onBeforeStep(){this.imesh.userData.bodies.forEach((a=>{a.position.y<-7&&(a.position.set(z(2),S(5,7),0),a.angularVelocity.set(0,0,0,0),a.velocity.set(0,0,0),a.quaternion.set(0,0,0,1))}))},randomColors(){const a=Math.floor(S(0,100)),t=new e,o=new Array(this.COUNT).fill().map((()=>u[a][Math.floor(S(0,5))]));for(let e=0;e<this.COUNT;e++)this.imesh.setColorAt(e,t.set(o[e]));this.imesh.instanceColor.needsUpdate=!0}}};A.render=function(a,e,t,o,s,i){const n=C("Camera"),r=C("AmbientLight"),h=C("SpotLight"),l=C("PhongMaterial"),d=C("Plane"),p=C("SphereGeometry"),c=C("ToonMaterial"),m=C("InstancedMesh"),f=C("Box"),u=C("CannonWorld"),S=C("Scene"),z=C("Renderer");return g(),w(z,{ref:"renderer",antialias:"","orbit-ctrl":"",resize:"",shadow:"",onClick:i.randomColors},{default:y((()=>[M(n,{position:{z:7}}),M(S,{background:"white"},{default:y((()=>[M(r,{color:"#aaaaaa"}),M(h,{color:"#aaaaaa",intensity:.5,position:{x:0,y:1,z:2},angle:Math.PI/3,penumbra:.5,"cast-shadow":"","shadow-map-size":{width:1024,height:1024}},null,8,["intensity","angle","penumbra"]),M(h,{color:"#ff0000",intensity:.5,position:{x:0,y:-1,z:2},angle:Math.PI/3,penumbra:.5,"cast-shadow":"","shadow-map-size":{width:1024,height:1024}},null,8,["intensity","angle","penumbra"]),M(d,{width:15,height:15,position:{z:-.1},"receive-shadow":""},{default:y((()=>[M(l,{color:"#aaaaaa"})])),_:1},8,["position"]),M(u,{gravity:{x:0,y:-9.82,z:0},onBeforeStep:i.onBeforeStep},{default:y((()=>[M(m,{ref:"imeshC",count:o.COUNT,onCreated:i.initIMesh,"cast-shadow":""},{default:y((()=>[M(p,{radius:.1,"width-segments":16,"height-segments":16},null,8,["radius"]),M(c)])),_:1},8,["count","onCreated"]),(g(),w(b,null,x(6,(a=>M(f,{key:`box-${a}`,width:3,height:.05,depth:.2,position:{x:1*(a%2==0?1:-1),y:1.5*(a-3.5),z:0},rotation:{z:(a%2==0?1:-1)*Math.PI/6},"cast-shadow":""},{default:y((()=>[M(l,{color:"#aaaaaa"})])),_:2},1032,["height","depth","position","rotation"]))),64))])),_:1},8,["gravity","onBeforeStep"])])),_:1})])),_:1},8,["onClick"])};export default A;
