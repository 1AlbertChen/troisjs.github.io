import{A as t,B as e,f as s,E as i,H as a,m as n,n as r,h as o,i as h,o as l,k as m,j as d,T as c,U as p,p as u,q as f,r as y}from"./trois.module.83557d8a.js";import{r as g,o as x,c as M,w as S,b as N}from"./app.cc8ad125.js";const{randFloat:A,randFloatSpread:O}=y,P={components:{AmbientLight:t,BoxGeometry:e,Camera:s,EffectComposer:i,HalftonePass:a,InstancedMesh:n,PhongMaterial:r,PointLight:o,Renderer:h,RenderPass:l,StandardMaterial:m,Scene:d,Text:c,UnrealBloomPass:p},setup(){const t=[],e=new f,s=new u,i=new f;for(let a=0;a<2e3;a++)t.push({position:new f(O(200),O(200),O(200)),scale:A(.2,1),scaleZ:A(.1,1),velocity:new f(O(2),O(2),O(2)),attraction:.03+A(-.01,.01),vlimit:1.2+A(-.1,.1)});return{NUM_INSTANCES:2e3,instances:t,target:e,dummyO:s,dummyV:i}},mounted(){this.renderer=this.$refs.renderer,this.imesh=this.$refs.imesh.mesh,this.light=this.$refs.light.light,this.init()},methods:{init(){for(let t=0;t<this.NUM_INSTANCES;t++){const{position:e,scale:s,scaleZ:i}=this.instances[t];this.dummyO.position.copy(e),this.dummyO.scale.set(s,s,i),this.dummyO.updateMatrix(),this.imesh.setMatrixAt(t,this.dummyO.matrix)}this.imesh.instanceMatrix.needsUpdate=!0,this.renderer.onBeforeRender(this.animate)},animate(){const{pointer:t}=this.renderer.three;this.target.copy(t.positionV3),this.light.position.copy(this.target);for(let e=0;e<this.NUM_INSTANCES;e++){const{position:t,scale:s,scaleZ:i,velocity:a,attraction:n,vlimit:r}=this.instances[e];this.dummyV.copy(this.target).sub(t).normalize().multiplyScalar(n),a.add(this.dummyV).clampScalar(-r,r),t.add(a),this.dummyO.position.copy(t),this.dummyO.scale.set(s,s,i),this.dummyO.lookAt(this.dummyV.copy(t).add(a)),this.dummyO.updateMatrix(),this.imesh.setMatrixAt(e,this.dummyO.matrix)}this.imesh.instanceMatrix.needsUpdate=!0}}};P.render=function(t,e,s,i,a,n){const r=g("Camera"),o=g("AmbientLight"),h=g("PointLight"),l=g("BoxGeometry"),m=g("StandardMaterial"),d=g("InstancedMesh"),c=g("PhongMaterial"),p=g("Text"),u=g("Scene"),f=g("RenderPass"),y=g("UnrealBloomPass"),A=g("HalftonePass"),O=g("EffectComposer"),P=g("Renderer");return x(),M(P,{ref:"renderer",resize:"","orbit-ctrl":"",pointer:""},{default:S((()=>[N(r,{position:{z:200}}),N(u,null,{default:S((()=>[N(o,{color:"#808080"}),N(h,{color:"#ff6000"}),N(h,{ref:"light",color:"#0060ff",intensity:.5},null,8,["intensity"]),N(h,{color:"#ff6000",intensity:.5,position:{x:100}},null,8,["intensity"]),N(h,{color:"#0000ff",intensity:.5,position:{x:-100}},null,8,["intensity"]),N(d,{ref:"imesh",count:i.NUM_INSTANCES},{default:S((()=>[N(l,{width:2,height:2,depth:10}),N(m,{props:{transparent:!0,opacity:.9,metalness:.8,roughness:.5}},null,8,["props"])])),_:1},8,["count"]),N(p,{text:"TroisJS","font-src":"/assets/helvetiker_regular.typeface.json",align:"center",size:30,height:5,position:{x:0,y:0,z:0},"cast-shadow":!0},{default:S((()=>[N(c)])),_:1})])),_:1}),N(O,null,{default:S((()=>[N(f),N(y,{strength:1}),N(A,{radius:1,scatter:0})])),_:1})])),_:1},512)};export default P;
