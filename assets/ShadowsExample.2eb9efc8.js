import{_ as e}from"./OrbitControls.9727ee0a.js";import{A as t,B as s,a as i,I as o,f as a,r as h,c as r,d as n,S as m}from"./trois.module.be5bbac6.js";import{s as d}from"./simplex-noise.b185e35b.js";import{r as u,o as l,c,w as f,a as p}from"./app.6a81f61a.js";const I=new d,g={components:{AmbientLight:t,BoxGeometry:s,Camera:i,InstancedMesh:o,PhongMaterial:a,Plane:h,PointLight:r,Renderer:n,Scene:m},setup:()=>({SIZE:1.5,NX:20,NY:20,PADDING:1,SIZEP:2.5,W:49,H:49,NUM_INSTANCES:400}),data:()=>({}),mounted(){this.renderer=this.$refs.renderer,this.mouse=this.renderer.three.mouse,this.mouseV3=this.renderer.three.mouseV3,this.imesh=this.$refs.imesh.mesh,this.light=this.$refs.light.light,this.dummy=new e,this.renderer.onBeforeRender(this.animate)},methods:{animate(){this.light.position.x=this.mouseV3.x,this.light.position.y=this.mouseV3.y,this.updateInstanceMatrix()},updateInstanceMatrix(){const e=-this.W/2+this.PADDING,t=-this.H/2+this.PADDING,s=1e-4*Date.now(),i=.1*this.mouse.x,o=.1*this.mouse.y;let a,h,r,n,m,d;for(let u=0;u<this.NX;u++)for(let l=0;l<this.NY;l++)a=e+u*this.SIZEP,h=t+l*this.SIZEP,r=.005*a+i,n=.005*h+o,m=I.noise3D(r,n,s)*Math.PI,d=I.noise3D(n,r,s)*Math.PI,this.dummy.position.set(a,h,-10),this.dummy.rotation.set(m,d,0),this.dummy.updateMatrix(),this.imesh.setMatrixAt(u*this.NY+l,this.dummy.matrix);this.imesh.instanceMatrix.needsUpdate=!0}}};g.render=function(e,t,s,i,o,a){const h=u("Camera"),r=u("AmbientLight"),n=u("PointLight"),m=u("BoxGeometry"),d=u("PhongMaterial"),I=u("InstancedMesh"),g=u("Plane"),N=u("Scene"),P=u("Renderer");return l(),c(P,{ref:"renderer",antialias:"",resize:"","orbit-ctrl":"","mouse-move":"","mouse-raycast":"",shadow:""},{default:f((()=>[p(h,{position:{z:20}}),p(N,null,{default:f((()=>[p(r,{color:"#808080"}),p(n,{ref:"light","cast-shadow":"","shadow-map-size":{width:1024,height:1024}},null,512),p(I,{ref:"imesh",count:i.NUM_INSTANCES,"cast-shadow":"","receive-shadow":""},{default:f((()=>[p(m,{size:i.SIZE},null,8,["size"]),p(d,{color:"#9C1E15"})])),_:1},8,["count"]),p(g,{width:2*i.W,height:2*i.H,position:{z:-10-i.SIZE},"receive-shadow":""},{default:f((()=>[p(d,{color:"#9C1E15"})])),_:1},8,["width","height","position"])])),_:1})])),_:1},512)};export default g;
